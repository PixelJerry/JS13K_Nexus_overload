/**
 * Sound.js
 */

var Sound = {
	// Properties
	ctx: null,
	sounds: {},

	// Methods
	add: function( key, settings ) {
		// return; // Want to increase loading times - REMOVE ONCE DONE
		// Do not continue if sound is not supported
		if (this.ctx === null) {
			return;
		}
		this.sounds[ key ] = [];
		settings.forEach( function( elem, index ) {
			this.sounds[ key ].push( jsfxr(elem, this.ctx) );
		}, this );
	},

	play: function( key ) {
		// Do not continue if sound is not supported
		if (this.ctx === null) {
			return;
		}
		var sound = this.sounds[ key ];
		var buffer = sound.length > 1 ? sound[ randomInt(0, sound.length - 1) ] : sound[ 0 ];

		var src = this.ctx.createBufferSource();
        src.buffer = buffer;
        src.connect(this.ctx.destination);
        src.start(0);
	}
};

// IE Workarround
if (typeof AudioContext !== "undefined") {
	Sound.ctx = new AudioContext();
}

Sound.add( "shoot",
	[
		[2,,0.18,,,0.75,,-0.48,,0.32,0.41,0.02,,,-1,,0.58,,0.79,,1,,,0.25],
		// [2,0.0915,0.1929,0.0374,0.0101,0.7969,,-0.4142,0.0711,0.2599,0.4835,-0.1157,0.002,0.0747,-0.969,0.1553,0.5114,-0.0646,0.74,0.0953,0.8881,0.0203,0.104,0.25]
	]
);

Sound.add( "damage",
	[
		[3,,0.1,0.75,0.1423,0.04,,-0.3253,,,,,,,,,,,1,,,0.2797,,0.25],
		[3,,0.1298,0.7299,0.1152,0.121,0.0359,-0.3636,0.0194,0.0016,0.1639,0.1275,0.016,0.0303,0.035,0.0901,0.1947,-0.1091,0.9605,-0.1113,,0.3222,-0.0271,0.25]
	]
);

Sound.add("die",
	[
		[3,,0.01,0.3347,0.8256,0.507,,-0.9429,-0.0007,0.1645,,0.0677,-0.24,-0.8962,-0.0062,,-0.0312,-0.0032,0.9774,0.8827,0.9143,0.0021,,0.5]
	]
);

Sound.add( "level",
	[
		// [0,,0.16,0.44,1,0.13,,0.02,,0.58,1,,,0.33,0.1,,-0.6,0.3,1,0.02,,0.132,,0.3]
		[0,,0.1,0.58,0.66,0.71,,-0.04,-0.6,0.76,1,-0.48,,0.2,,,0.1282,-0.0457,0.33,-0.0799,,,,0.3]
	]
);

Sound.add( "enemyAttack",
	[
		[1,,0.18,0.25,0.38,0.53,0.1,-0.4,-0.02,0.79,0.66,0.02,,,-1,,0.58,,0.79,,1,0.61,,0.25],
		// [1,,0.1939,0.3375,0.3126,0.4983,0.1448,-0.4043,0.0094,0.7652,0.6755,-0.0085,0.0274,,-1,0.0417,0.595,0.042,0.7418,0.0057,1,0.6598,0.0219,0.25],
	]
);

Sound.add("enemyDie",
	[
		[3,0.19,0.1623,0.3627,0.26,0.0661,,-0.0971,,,,-0.6375,0.6342,,,,0.2429,-0.0249,1,,,,,0.3],
		[3,0.1488,0.2141,0.3548,0.2375,0.0913,,-0.1366,-0.0419,,0.0198,-0.6375,0.6342,,,,0.2429,-0.0249,1,-0.0332,,,,0.3],
	]
);


Sound.add("bossSpawn",
	[
		[0,0.16,0.28,,0.61,0.43,,-0.2421,-0.0095,0.83,0.09,0.36,0.37,0.15,0.54,0.02,0.7042,0.0568,0.9978,0.1092,,,0.7862,0.3]
	]
);

Sound.add("bossDie",
	[
		[1,,0.14,0.35,0.68,,,0.4281,-0.1004,0.578,-0.429,0.1456,0.4425,0.6189,-0.0799,0.53,0.3077,,0.74,0.26,-0.9031,0.67,-0.36,0.3]
	]
);
